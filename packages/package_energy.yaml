sensor:
##    ## ##      ## ##     ##     ######  ######## ##    ##  ######   #######  ########  
##   ##  ##  ##  ## ##     ##    ##    ## ##       ###   ## ##    ## ##     ## ##     ## 
##  ##   ##  ##  ## ##     ##    ##       ##       ####  ## ##       ##     ## ##     ## 
#####    ##  ##  ## #########     ######  ######   ## ## ##  ######  ##     ## ########  
##  ##   ##  ##  ## ##     ##          ## ##       ##  ####       ## ##     ## ##   ##   
##   ##  ##  ##  ## ##     ##    ##    ## ##       ##   ### ##    ## ##     ## ##    ##  
##    ##  ###  ###  ##     ##     ######  ######## ##    ##  ######   #######  ##     ## 

## KWH 
  - platform: template
    sensors:
      kwh_consumption_total:
        icon_template: mdi:fire
        unit_of_measurement: "kWh"
        value_template: >
          {{ states('input_number.kwh_consumption_total') }}

  - platform: template
    sensors:
      kwh_consumption_startofday:
        unique_id: kwh_consumption_startofday
        icon_template: mdi:fire
        unit_of_measurement: "kWh"
        value_template: >
          {{ states('input_number.kwh_consumption_startofday') }}   

  - platform: template
    sensors:
      kwh_consumption_today:
        icon_template: mdi:fire
        unit_of_measurement: "kWh"
        value_template: >
          {{ states('input_number.kwh_consumption_today') }}    

  - platform: template
    sensors:
      kwh_consumption_startofmonth:
        unique_id: kwh_consumption_startofmonth
        icon_template: mdi:fire
        unit_of_measurement: "kWh"
        value_template: >
          {{ states('input_number.kwh_consumption_startofmonth') }}    

  - platform: template
    sensors:
      kwh_consumption_startofyear:
        unique_id: kwh_consumption_startofyear
        icon_template: mdi:fire
        unit_of_measurement: "kWh"
        value_template: >
          {{ states('input_number.kwh_consumption_startofyear') }}    

  - platform: template
    sensors:
      kwh_consumption_lastday:
        unique_id: kwh_consumption_lastday
        icon_template: mdi:fire
        unit_of_measurement: "kWh"
        value_template: >
          {{ states('input_number.kwh_consumption_lastday') }}    

  - platform: template
    sensors:
      kwh_consumption_thismonth:
        unique_id: kwh_consumption_thismonth
        icon_template: mdi:fire
        unit_of_measurement: "kWh"
        value_template: >
          {{ states('input_number.kwh_consumption_thismonth') }}

  - platform: template
    sensors:
      kwh_consumption_lastmonth:
        unique_id: kwh_consumption_lastmonth
        icon_template: mdi:fire
        unit_of_measurement: "kWh"
        value_template: >
          {{ states('input_number.kwh_consumption_lastmonth') }}

  - platform: template
    sensors:
      kwh_consumption_thisyear:
        unique_id: kwh_consumption_thisyear
        icon_template: mdi:fire
        unit_of_measurement: "kWh"
        value_template: >
          {{ states('input_number.kwh_consumption_thisyear') }}

  - platform: template
    sensors:
      kwh_consumption_lastyear:
        unique_id: kwh_consumption_lastyear
        icon_template: mdi:fire
        unit_of_measurement: "kWh"
        value_template: >
          {{ states('input_number.kwh_consumption_lastyear') }}

  - platform: template
    sensors:
      kwh_active_usage:
        unique_id: kwh_active_usage
        device_class: energy
        icon_template: mdi:fire
        unit_of_measurement: "kWh"
        value_template: >
          {{ states('input_number.kwh_active_usage') }}
      
  - platform: template
    sensors:
      kwh_min:
        unique_id: kwh_min
        icon_template: mdi:fire
        unit_of_measurement: "kWh"
        value_template: >
          {{ states('input_number.kwh_min') }}
      
  - platform: template
    sensors:
      kwh_max:
        unique_id: kwh_max
        icon_template: mdi:fire
        unit_of_measurement: "kWh"
        value_template: >
          {{ states('input_number.kwh_max') }}

  - platform: template
    sensors:
      monthly_kwh_peak_hour:
        unique_id: monthly_kwh_peak_hour
        icon_template: mdi:fire
        unit_of_measurement: "kWh"
        value_template: >
          {{ states('input_number.monthly_kwh_peak_hour') }}

  - platform: template
    sensors:
      price_usage_now:
        unique_id: price_usage_now
        icon_template: mdi:fire
        unit_of_measurement: "kWh"
        value_template: >
          {{ states('input_number.price_usage_now') }}




########  ########  ####  ######  ########     ######  ######## ##    ##  ######   #######  ########  
##     ## ##     ##  ##  ##    ## ##          ##    ## ##       ###   ## ##    ## ##     ## ##     ## 
##     ## ##     ##  ##  ##       ##          ##       ##       ####  ## ##       ##     ## ##     ## 
########  ########   ##  ##       ######       ######  ######   ## ## ##  ######  ##     ## ########  
##        ##   ##    ##  ##       ##                ## ##       ##  ####       ## ##     ## ##   ##   
##        ##    ##   ##  ##    ## ##          ##    ## ##       ##   ### ##    ## ##     ## ##    ##  
##        ##     ## ####  ######  ########     ######  ######## ##    ##  ######   #######  ##     ## 

## Realtime Cost
  - platform: template
    sensors:
      kwh_price_with_fees:
        unique_id: kwh_price_with_fees
        unit_of_measurement: "NOK"
        icon_template: mdi:currency-usd
        value_template: >
          {{ states('input_number.kwh_price_with_fees') }}


## Norgespris Savings
  - platform: template
    sensors:
      norgespris_adjustment_now:
        unique_id: norgespris_adjustment_now
        unit_of_measurement: "NOK/kWh"
        icon_template: mdi:cash-plus
        value_template: >
          {{ states('input_number.norgespris_adjustment_now') }}

  - platform: template
    sensors:
      norgespris_savings_today:
        unique_id: norgespris_savings_today
        unit_of_measurement: "NOK"
        icon_template: mdi:piggy-bank
        value_template: >
          {{ states('input_number.norgespris_savings_today') }}

  - platform: template
    sensors:
      norgespris_savings_yesterday:
        unique_id: norgespris_savings_yesterday
        unit_of_measurement: "NOK"
        icon_template: mdi:piggy-bank
        value_template: >
          {{ states('input_number.norgespris_savings_yesterday') }}

  - platform: template
    sensors:
      norgespris_savings_this_month:
        unique_id: norgespris_savings_this_month
        unit_of_measurement: "NOK"
        icon_template: mdi:piggy-bank
        value_template: >
          {{ states('input_number.norgespris_savings_this_month') }}

  - platform: template
    sensors:
      norgespris_savings_last_month:
        unique_id: norgespris_savings_last_month
        unit_of_measurement: "NOK"
        icon_template: mdi:piggy-bank
        value_template: >
          {{ states('input_number.norgespris_savings_last_month') }}

  - platform: template
    sensors:
      norgespris_savings_this_year:
        unique_id: norgespris_savings_this_year
        unit_of_measurement: "NOK"
        icon_template: mdi:piggy-bank
        value_template: >
          {{ states('input_number.norgespris_savings_this_year') }}

  - platform: template
    sensors:
      norgespris_savings_last_year:
        unique_id: norgespris_savings_last_year
        unit_of_measurement: "NOK"
        icon_template: mdi:piggy-bank
        value_template: >
          {{ states('input_number.norgespris_savings_last_year') }}

## Cost without Norgespris (for comparison)
  - platform: template
    sensors:
      daily_cost_without_norgespris:
        unique_id: daily_cost_without_norgespris
        unit_of_measurement: "NOK"
        icon_template: mdi:currency-usd
        value_template: >
          {{ states('input_number.daily_cost_without_norgespris') }}

  - platform: template
    sensors:
      monthly_cost_without_norgespris:
        unique_id: monthly_cost_without_norgespris
        unit_of_measurement: "NOK"
        icon_template: mdi:currency-usd
        value_template: >
          {{ states('input_number.monthly_cost_without_norgespris') }}

  - platform: template
    sensors:
      yearly_cost_without_norgespris:
        unique_id: yearly_cost_without_norgespris
        unit_of_measurement: "NOK"
        icon_template: mdi:currency-usd
        value_template: >
          {{ states('input_number.yearly_cost_without_norgespris') }}
          
## Accumulated Cost
  - platform: template
    sensors:
      total_cost:
        unique_id: total_cost
        icon_template: mdi:currency-usd
        unit_of_measurement: "NOK"
        value_template: >
          {{ states('input_number.total_cost') }}

  - platform: template
    sensors:
      kwh_price:
        unique_id: kwh_price
        unit_of_measurement: "NOK"
        icon_template: mdi:currency-usd
        value_template: >
          {{ states('input_number.kwh_price') }}

  - platform: template
    sensors:
      monthly_power_peak_prize:
        unique_id: monthly_power_peak_prize
        icon_template: mdi:fire
        unit_of_measurement: "NOK"
        value_template: >
          {{ states('input_number.monthly_power_peak_prize') }}

  - platform: template
    sensors:
      cost_lastday:
        unique_id: cost_lastday
        icon_template: mdi:currency-usd
        unit_of_measurement: "NOK"
        value_template: >
          {{ states('input_number.cost_lastday') }}

  - platform: template
    sensors:
      cost_last_month:
        unique_id: cost_last_month
        icon_template: mdi:currency-usd
        unit_of_measurement: "NOK"
        value_template: >
          {{ states('input_number.cost_last_month') }}

  - platform: template
    sensors:
      cost_lastyear:
        unique_id: cost_lastyear
        icon_template: mdi:currency-usd
        unit_of_measurement: "NOK"
        value_template: >
          {{ states('input_number.cost_lastyear') }}


  - platform: template
    sensors:
      daily_prize_accumulated_with_fees:
        unique_id: daily_prize_accumulated_with_fees
        unit_of_measurement: NOK
        value_template: >
          {{ float(states('input_number.daily_prize_accumulated_with_fees'))| float(0) }}

  - platform: template
    sensors:
      monthly_prize_accumulated_with_fees:
        unique_id: monthly_prize_accumulated_with_fees
        unit_of_measurement: NOK
        value_template: >
          {{ float(states('input_number.monthly_prize_accumulated_with_fees'))| float(0) }}


  - platform: template
    sensors:
      yearly_prize_accumulated_with_fees:
        unique_id: yearly_prize_accumulated_with_fees
        unit_of_measurement: NOK
        value_template: >
          {{ float(states('input_number.yearly_prize_accumulated_with_fees'))| float(0) }}


  - platform: template
    sensors:
      energiledd:
        unique_id: energiledd
        unit_of_measurement: NOK/kWh
        value_template: >
          {{ float(states('input_number.energiledd'))| float(0) }}



input_number:

##    ## ##      ## ##     ##    #### ##    ## ########  ##     ## ########    ##    ## ##     ## ##     ## ########  ######## ########  
##   ##  ##  ##  ## ##     ##     ##  ###   ## ##     ## ##     ##    ##       ###   ## ##     ## ###   ### ##     ## ##       ##     ## 
##  ##   ##  ##  ## ##     ##     ##  ####  ## ##     ## ##     ##    ##       ####  ## ##     ## #### #### ##     ## ##       ##     ## 
#####    ##  ##  ## #########     ##  ## ## ## ########  ##     ##    ##       ## ## ## ##     ## ## ### ## ########  ######   ########  
##  ##   ##  ##  ## ##     ##     ##  ##  #### ##        ##     ##    ##       ##  #### ##     ## ##     ## ##     ## ##       ##   ##   
##   ##  ##  ##  ## ##     ##     ##  ##   ### ##        ##     ##    ##       ##   ### ##     ## ##     ## ##     ## ##       ##    ##  
##    ##  ###  ###  ##     ##    #### ##    ## ##         #######     ##       ##    ##  #######  ##     ## ########  ######## ##     ##

  monthly_consumption_percentage:
    name: Måndeltig forbruk i %
    max: 999999999
    min: 0
    step: 0.001
    mode: box
    unit_of_measurement: "kWh"
    icon: mdi:counter   

  monthly_consumption_remaining:
    name: Gjenværende forbruk denne mnd
    max: 999999999
    min: 0
    step: 0.001
    mode: box
    unit_of_measurement: "kWh"
    icon: mdi:counter    
    
  kwh_active_usage:
    name: Nåværende forbruk
    max: 999999999
    min: 0
    step: 0.001
    mode: box
    unit_of_measurement: "kWh"
    icon: mdi:counter

  kwh_consumption_total:
    name: Total forbruk
    max: 999999999
    min: 0
    step: 0.001
    mode: box
    unit_of_measurement: "kWh"
    icon: mdi:counter

  kwh_consumption_thismonth:
    name: Forbruk denne måneden
    max: 999999999
    min: 0
    step: 0.001
    mode: box
    unit_of_measurement: "kWh"
    icon: mdi:counter

  kwh_consumption_lastmonth:
    name: Forbruk sist måned
    max: 999999999
    min: 0
    step: 0.1
    mode: box
    unit_of_measurement: "kWh"
    icon: mdi:counter

  kwh_consumption_today:
    name: Daglig forbruk
    max: 999999999
    min: 0
    step: 0.001
    mode: box
    unit_of_measurement: "kWh"
    icon: mdi:counter

  kwh_consumption_lastday:
    name: Forbruk i går
    max: 999999999
    min: 0
    step: 0.001
    mode: box
    unit_of_measurement: "kWh"
    icon: mdi:counter

  kwh_consumption_thisyear:
    name: Forbruk hittil i år
    max: 999999999
    min: 0
    step: 0.001
    mode: box
    unit_of_measurement: "kWh"
    icon: mdi:counter

  kwh_consumption_lastyear:
    name: Forbruk forrige år
    max: 999999999
    min: 0
    step: 0.001
    mode: box
    unit_of_measurement: "kWh"
    icon: mdi:counter

  kwh_max:
    name: Maks forbruk
    max: 999999999
    min: 0
    step: 0.001
    mode: box
    unit_of_measurement: "kWh"
    icon: mdi:counter

  kwh_min:
    name: Min forbruk
    max: 999999999
    min: 0
    step: 0.001
    mode: box
    unit_of_measurement: "kWh"
    icon: mdi:counter

  monthly_kwh_peak_hour:
    name: Strøm peak denne måneden
    max: 999999999
    min: 0
    step: 0.1
    mode: box
    unit_of_measurement: "kWh"
    icon: mdi:counter

  monthly_power_peak_prize:
    name: pris kapasitetledd denne måneden
    max: 999999999
    min: 0
    step: 0.1
    mode: box
    unit_of_measurement: "kWh"
    icon: mdi:counter

  price_usage_now:
    name: pris basert på nåværende forbruk
    max: 999999999
    min: 0
    step: 0.1
    mode: box
    unit_of_measurement: "kWh"
    icon: mdi:counter

  kwh_consumption_startofday:
    name: Forbruk ved start av dagen
    max: 999999999
    min: 0
    step: 0.1
    mode: box
    unit_of_measurement: "kWh"
    icon: mdi:counter
    
  kwh_consumption_startofmonth:
    name: Forbruk ved start av måneden
    max: 999999999
    min: 0
    step: 0.1
    mode: box
    unit_of_measurement: "kWh"
    icon: mdi:counter

  kwh_consumption_startofyear:
    name: Forbruk ved start av året
    max: 999999999
    min: 0
    step: 0.1
    mode: box
    unit_of_measurement: "kWh"
    icon: mdi:counter
########  ########  ####  ######  ########    #### ##    ## ########  ##     ## ########    ##    ## ##     ## ##     ## ########  ######## ########  
##     ## ##     ##  ##  ##    ## ##           ##  ###   ## ##     ## ##     ##    ##       ###   ## ##     ## ###   ### ##     ## ##       ##     ## 
##     ## ##     ##  ##  ##       ##           ##  ####  ## ##     ## ##     ##    ##       ####  ## ##     ## #### #### ##     ## ##       ##     ## 
########  ########   ##  ##       ######       ##  ## ## ## ########  ##     ##    ##       ## ## ## ##     ## ## ### ## ########  ######   ########  
##        ##   ##    ##  ##       ##           ##  ##  #### ##        ##     ##    ##       ##  #### ##     ## ##     ## ##     ## ##       ##   ##   
##        ##    ##   ##  ##    ## ##           ##  ##   ### ##        ##     ##    ##       ##   ### ##     ## ##     ## ##     ## ##       ##    ##  
##        ##     ## ####  ######  ########    #### ##    ## ##         #######     ##       ##    ##  #######  ##     ## ########  ######## ##     ## 

  cost_lastday:
    name: Konstnad forrige dag
    max: 999999999
    min: 0
    step: 0.1
    mode: box
    unit_of_measurement: "NOK"
    icon: mdi:counter

  cost_last_month:
    name: Konstnad forrige måned
    max: 999999999
    min: 0
    step: 0.1
    mode: box
    unit_of_measurement: "NOK"
    icon: mdi:counter

  cost_lastyear:
    name: Konstnad forrige året.
    max: 999999999
    min: 0
    step: 0.1
    mode: box
    unit_of_measurement: "NOK"
    icon: mdi:counter

  total_cost:
    name: Total kostnad fra oppstart
    max: 999999999
    min: 0
    step: 0.1
    mode: box
    unit_of_measurement: "NOK"
    icon: mdi:counter

  daily_prize_accumulated_with_fees:
    name: Daglig kostnad inkludert vat og energiledd
    max: 999999999
    min: -10000
    step: 0.1
    mode: box
    unit_of_measurement: "NOK"
    icon: mdi:counter


  monthly_prize_accumulated_with_fees:
    name: Måndeltig kostnad inkludert vat
    max: 999999999
    min: 0
    step: 0.1
    mode: box
    unit_of_measurement: "NOK"
    icon: mdi:counter

  yearly_prize_accumulated_with_fees:
    name: Årlig kostnad inkludert vat
    max: 999999999
    min: 0
    step: 0.1
    mode: box
    unit_of_measurement: "NOK"
    icon: mdi:counter

    
  kwh_price:
    name: kwh kostand
    max: 999999999
    min: 0
    step: 0.1
    mode: box
    unit_of_measurement: "NOK"
    icon: mdi:counter

  #electricity_price_eigeland_50_with_fees:
  kwh_price_with_fees:
    name: kwh kostand inkludert avgifter
    max: 999999999
    min: -10
    step: 0.1
    mode: box
    unit_of_measurement: "NOK"
    icon: mdi:counter
  

  energiledd:
    name: energiledd day/night
    max: 999999999
    min: 0
    step: 0.1
    mode: box
    unit_of_measurement: "NOK/kWh"
    icon: mdi:counter

  norgespris_adjustment_now:
    name: Norgespris justering nå
    initial: 0
    max: 999999999
    min: -999999999
    step: 0.0001
    mode: box
    unit_of_measurement: "NOK/kWh"
    icon: mdi:cash-plus

  norgespris_savings_today:
    name: Norgespris besparelse i dag
    initial: 0
    max: 999999999
    min: -999999999
    step: 0.01
    mode: box
    unit_of_measurement: "NOK"
    icon: mdi:piggy-bank

  norgespris_savings_yesterday:
    name: Norgespris besparelse i går
    initial: 0
    max: 999999999
    min: -999999999
    step: 0.01
    mode: box
    unit_of_measurement: "NOK"
    icon: mdi:piggy-bank

  norgespris_savings_this_month:
    name: Norgespris besparelse denne måneden
    initial: 0
    max: 999999999
    min: -999999999
    step: 0.01
    mode: box
    unit_of_measurement: "NOK"
    icon: mdi:piggy-bank

  norgespris_savings_last_month:
    name: Norgespris besparelse forrige måned
    initial: 0
    max: 999999999
    min: -999999999
    step: 0.01
    mode: box
    unit_of_measurement: "NOK"
    icon: mdi:piggy-bank

  norgespris_savings_this_year:
    name: Norgespris besparelse i år
    initial: 0
    max: 999999999
    min: -999999999
    step: 0.01
    mode: box
    unit_of_measurement: "NOK"
    icon: mdi:piggy-bank

  norgespris_savings_last_year:
    name: Norgespris besparelse i fjor
    initial: 0
    max: 999999999
    min: -999999999
    step: 0.01
    mode: box
    unit_of_measurement: "NOK"
    icon: mdi:piggy-bank

  daily_cost_without_norgespris:
    name: Daglig kostnad uten Norgespris
    initial: 0
    max: 999999999
    min: 0
    step: 0.01
    mode: box
    unit_of_measurement: "NOK"
    icon: mdi:currency-usd

  monthly_cost_without_norgespris:
    name: Månedlig kostnad uten Norgespris
    initial: 0
    max: 999999999
    min: 0
    step: 0.01
    mode: box
    unit_of_measurement: "NOK"
    icon: mdi:currency-usd

  yearly_cost_without_norgespris:
    name: Årlig kostnad uten Norgespris
    initial: 0
    max: 999999999
    min: 0
    step: 0.01
    mode: box
    unit_of_measurement: "NOK"
    icon: mdi:currency-usd


###########################################
########## A U T O M A T I O N S ##########
###########################################

